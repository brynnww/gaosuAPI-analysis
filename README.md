# æ”¶è´¹ç®¡ç†ç³»ç»Ÿ - æ™ºèƒ½æ•°æ®åˆ†æå¹³å°

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäºFastAPIå’ŒMCPï¼ˆModel Context Protocolï¼‰çš„æ™ºèƒ½æ”¶è´¹æ•°æ®åˆ†æå¹³å°ï¼Œæä¾›å®æ—¶æ•°æ®æŸ¥è¯¢ã€æ™ºèƒ½æŠ¥å‘Šç”Ÿæˆå’ŒAIå¯¹è¯åˆ†æåŠŸèƒ½ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯ç•Œé¢ (å·¦å³åˆ†æ å¸ƒå±€)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      æŠ¥å‘Šç”Ÿæˆç•Œé¢        â”‚       æ™ºèƒ½å¯¹è¯ç•Œé¢          â”‚  â”‚
â”‚  â”‚   â€¢ æŠ¥å‘Šå‚æ•°è®¾ç½®        â”‚    â€¢ è‡ªç„¶è¯­è¨€æŸ¥è¯¢          â”‚  â”‚
â”‚  â”‚   â€¢ å›¾è¡¨å±•ç¤º           â”‚    â€¢ AIæ™ºèƒ½å›ç­”            â”‚  â”‚
â”‚  â”‚   â€¢ æŠ¥å‘Šä¸‹è½½           â”‚    â€¢ å¯¹è¯å†å²ç®¡ç†          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ HTTPè¯·æ±‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                FastAPIæœåŠ¡ (åç«¯æ ¸å¿ƒ)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   æŠ¥å‘ŠAPI       â”‚   èŠå¤©API       â”‚    å¥åº·æ£€æŸ¥API      â”‚ â”‚
â”‚  â”‚   (report_api)  â”‚   (chat)        â”‚    (health)         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                         â”‚
      â–¼                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        æŠ¥å‘Šç”Ÿæˆæ¨¡å—              â”‚  â”‚        æ™ºèƒ½å¯¹è¯æ¨¡å—              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   ReportGenerator           â”‚ â”‚  â”‚  â”‚      MCPå®¢æˆ·ç«¯              â”‚ â”‚
â”‚  â”‚   â€¢ æ•°æ®è·å–               â”‚ â”‚  â”‚  â”‚   â€¢ å·¥å…·è°ƒç”¨ç®¡ç†            â”‚ â”‚
â”‚  â”‚   â€¢ å›¾è¡¨ç”Ÿæˆ               â”‚ â”‚  â”‚  â”‚   â€¢ ä¼šè¯ç®¡ç†               â”‚ â”‚
â”‚  â”‚   â€¢ AIåˆ†æ                 â”‚ â”‚  â”‚  â”‚   â€¢ OpenAIé›†æˆ             â”‚ â”‚
â”‚  â”‚   â€¢ æŠ¥å‘Šåˆæˆ               â”‚ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚              â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                                 â”‚
                  â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        å¤–éƒ¨APIè°ƒç”¨              â”‚  â”‚        MCPæœåŠ¡å™¨                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     HTTPå®¢æˆ·ç«¯              â”‚ â”‚  â”‚  â”‚   platformbilling_mcp       â”‚ â”‚
â”‚  â”‚   â€¢ é‡è¯•æœºåˆ¶               â”‚ â”‚  â”‚  â”‚   â€¢ 12ä¸ªMCPå·¥å…·             â”‚ â”‚
â”‚  â”‚   â€¢ è¶…æ—¶å¤„ç†               â”‚ â”‚  â”‚  â”‚   â€¢ æ•°æ®æ ¼å¼åŒ–             â”‚ â”‚
â”‚  â”‚   â€¢ é”™è¯¯å¤„ç†               â”‚ â”‚  â”‚  â”‚   â€¢ APIä»£ç†                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                                    â”‚
                  â–¼                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¤–éƒ¨APIæœåŠ¡                        â”‚                 â”‚
â”‚            http://116.182.4.67:8088/gssfApi2        â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    APIæ¥å£åˆ—è¡¨                                   â”‚ â”‚
â”‚  â”‚  â€¢ trade/realTimeTurnover          - å®æ—¶äº¤æ˜“æ•°æ®              â”‚ â”‚
â”‚  â”‚  â€¢ trade/companyPayTypeTurnover     - åˆ†å…¬å¸æ”¯ä»˜äº¤æ˜“æ•°æ®        â”‚ â”‚
â”‚  â”‚  â€¢ trade/companyVehTypeTurnover     - åˆ†å…¬å¸è½¦å‹äº¤æ˜“æ•°æ®        â”‚ â”‚
â”‚  â”‚  â€¢ trade/stationPayTypeTurnover     - æ”¶è´¹ç«™æ”¯ä»˜äº¤æ˜“æ•°æ®        â”‚ â”‚
â”‚  â”‚  â€¢ trade/stationVehTypeTurnover     - æ”¶è´¹ç«™è½¦å‹äº¤æ˜“æ•°æ®        â”‚ â”‚
â”‚  â”‚  â€¢ traffic/realTimeTrafficFlow     - å®æ—¶è½¦æµé‡æ•°æ®            â”‚ â”‚
â”‚  â”‚  â€¢ traffic/companyPayTypeTrafficFlow - åˆ†å…¬å¸æ”¯ä»˜è½¦æµé‡æ•°æ®    â”‚ â”‚
â”‚  â”‚  â€¢ traffic/companyVehTypeTrafficFlow - åˆ†å…¬å¸è½¦å‹è½¦æµé‡æ•°æ®    â”‚ â”‚
â”‚  â”‚  â€¢ traffic/stationPayTypeTrafficFlow - æ”¶è´¹ç«™æ”¯ä»˜è½¦æµé‡æ•°æ®    â”‚ â”‚
â”‚  â”‚  â€¢ traffic/stationVehTypeTrafficFlow - æ”¶è´¹ç«™è½¦å‹è½¦æµé‡æ•°æ®    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å—åŒ–æ¶æ„è®¾è®¡

```
backend/
â”œâ”€â”€ start_server.py          # ğŸš€ æœåŠ¡å¯åŠ¨å…¥å£
â”œâ”€â”€ apis/                    # ğŸŒ APIæ¥å£å±‚
â”‚   â”œâ”€â”€ fastapi_server.py    #   â”œâ”€ FastAPIä¸»æœåŠ¡
â”‚   â”œâ”€â”€ report_api.py        #   â”œâ”€ æŠ¥å‘Šç”ŸæˆAPI
â”‚   â””â”€â”€ platformbilling_mcp.py # â””â”€ MCPæœåŠ¡å™¨
â”œâ”€â”€ clients/                 # ğŸ”— å®¢æˆ·ç«¯å±‚
â”‚   â”œâ”€â”€ mcp_client.py        #   â”œâ”€ MCPå®¢æˆ·ç«¯
â”‚   â””â”€â”€ api_client.py        #   â””â”€ å¤–éƒ¨APIå®¢æˆ·ç«¯
â”œâ”€â”€ reports/                 # ğŸ“Š æŠ¥å‘Šæ¨¡å—
â”‚   â””â”€â”€ report_generator.py  #   â””â”€ æŠ¥å‘Šç”Ÿæˆå™¨
â”œâ”€â”€ config/                  # âš™ï¸ é…ç½®æ¨¡å—
â”‚   â”œâ”€â”€ settings.py          #   â”œâ”€ é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ .env                 #   â””â”€ ç¯å¢ƒå˜é‡
â””â”€â”€ utils/                   # ğŸ› ï¸ å·¥å…·æ¨¡å—
    â””â”€â”€ test_api.py          #     â””â”€ APIæµ‹è¯•å·¥å…·

frontend/
â”œâ”€â”€ start_frontend.py        # ğŸš€ å‰ç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ index.html               # ğŸ  ä¸»ç•Œé¢
â”œâ”€â”€ report.js                # ğŸ“Š æŠ¥å‘ŠåŠŸèƒ½è„šæœ¬
â”œâ”€â”€ chat.js                  # ğŸ’¬ å¯¹è¯åŠŸèƒ½è„šæœ¬
â””â”€â”€ styles.css               # ğŸ¨ æ ·å¼æ–‡ä»¶
```

### æ•°æ®æµå‘å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTP     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    MCP      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·è¯·æ±‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  FastAPI   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ MCPæœåŠ¡å™¨   â”‚
â”‚   (å‰ç«¯)    â”‚           â”‚   æœåŠ¡å™¨    â”‚             â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚                           â”‚
                                 â–¼                           â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  æŠ¥å‘Šç”Ÿæˆå™¨  â”‚             â”‚  å¤–éƒ¨API    â”‚
                          â”‚             â”‚             â”‚   è°ƒç”¨      â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚                           â”‚
                                 â–¼                           â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ å›¾è¡¨+AIåˆ†æ â”‚             â”‚  æ”¶è´¹ç³»ç»Ÿ   â”‚
                          â”‚   ç»“æœ      â”‚             â”‚   æ•°æ®æº    â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚                           â”‚
                                 â–¼                           â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
                          â”‚  å‰ç«¯å±•ç¤º   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚   (JSON)    â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ¶æ„æ ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æŠ€æœ¯æ ˆæ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å‰ç«¯å±‚ (Frontend)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   HTML5     â”‚    CSS3     â”‚ JavaScript  â”‚  Chart.js   â”‚  â”‚
â”‚  â”‚   ç»“æ„å±‚     â”‚   æ ·å¼å±‚     â”‚   é€»è¾‘å±‚     â”‚   å›¾è¡¨å±‚     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åç«¯å±‚ (Backend)                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   FastAPI   â”‚     MCP     â”‚  Matplotlib â”‚    HTTPX    â”‚  â”‚
â”‚  â”‚  Webæ¡†æ¶    â”‚   åè®®å±‚     â”‚   å›¾è¡¨ç”Ÿæˆ   â”‚  HTTPå®¢æˆ·ç«¯  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®å±‚ (Data)                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Pandas    â”‚   NumPy     â”‚   JSON      â”‚  å¤–éƒ¨API    â”‚  â”‚
â”‚  â”‚  æ•°æ®å¤„ç†    â”‚   æ•°å€¼è®¡ç®—   â”‚  æ•°æ®æ ¼å¼    â”‚   æ•°æ®æº     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AIå±‚ (Intelligence)                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   OpenAI    â”‚   Qwenæ¨¡å‹  â”‚    MCP      â”‚  è‡ªç„¶è¯­è¨€   â”‚  â”‚
â”‚  â”‚    API      â”‚   AIæ¨ç†    â”‚   å·¥å…·è°ƒç”¨   â”‚    å¤„ç†     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


#### å¯åŠ¨æ–¹å¼
```bash
# å¯åŠ¨å®Œæ•´æœåŠ¡ï¼ˆåç«¯+å‰ç«¯ï¼‰
cd backend
python statrt_server.py 
cd frontend
python start_frontend.py

# ä»…å¯åŠ¨åç«¯
python statrt_server.py 
# ä»…å¯åŠ¨å‰ç«¯
python start_frontend.py



## ğŸ“Š æŠ¥å‘Šç”ŸæˆåŠŸèƒ½è¯¦è§£

### ğŸ”„ æ‰§è¡Œæµç¨‹

å½“ç”¨æˆ·ç‚¹å‡»"ç”ŸæˆæŠ¥å‘Š"æŒ‰é’®æ—¶ï¼Œç³»ç»ŸæŒ‰ä»¥ä¸‹æ­¥éª¤æ‰§è¡Œï¼š

#### 1. **å‰ç«¯è§¦å‘** (`frontend/report.js`)
```javascript
// ç”¨æˆ·ç‚¹å‡»ç”ŸæˆæŠ¥å‘ŠæŒ‰é’®
generateReport() {
    // å‘é€POSTè¯·æ±‚åˆ°åç«¯API
    fetch('/api/report/generate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ start_date, end_date })
    })
}
```

#### 2. **åç«¯APIæ¥æ”¶** (`backend/apis/report_api.py`)
```python
@app.post("/api/report/generate")
async def generate_report(request: ReportRequest, background_tasks: BackgroundTasks):
    # åˆ›å»ºæŠ¥å‘Šä»»åŠ¡
    report_id = str(uuid.uuid4())
    background_tasks.add_task(generate_report_task, report_id, request.start_date, request.end_date)
    return ReportResponse(report_id=report_id, status="processing")
```

#### 3. **æŠ¥å‘Šç”Ÿæˆå™¨æ‰§è¡Œ** (`backend/reports/report_generator.py`)

**æ ¸å¿ƒæ–¹æ³•ï¼š`generate_report()`**

```python
async def generate_report(self, start_date: str, end_date: str) -> ReportData:
    # æ­¥éª¤1: è®¡ç®—å¯¹æ¯”æ—¥æœŸèŒƒå›´
    prev_start, prev_end, year_ago_start, year_ago_end = self._calculate_date_ranges(start_date, end_date)
    
    # æ­¥éª¤2: é¡ºåºè·å–å¤šæœŸæ•°æ®ï¼ˆé¿å…å¹¶å‘é™åˆ¶ï¼‰
    current_period_data = await self._make_request("trade/companyPayTypeTurnover", "POST", {"beginTime": start_date, "endTime": end_date})
    previous_period_data = await self._make_request("trade/companyPayTypeTurnover", "POST", {"beginTime": prev_start, "endTime": prev_end})
    year_ago_data = await self._make_request("trade/companyPayTypeTurnover", "POST", {"beginTime": year_ago_start, "endTime": year_ago_end})
    traffic_flow_data = await self._make_request("traffic/companyPayTypeTrafficFlow", "POST", {"beginTime": start_date, "endTime": end_date})
    year_ago_traffic_data = await self._make_request("traffic/companyPayTypeTrafficFlow", "POST", {"beginTime": year_ago_start, "endTime": year_ago_end})
    vehicle_data = await self._make_request("traffic/companyVehTypeTrafficFlow", "POST", {"beginTime": start_date, "endTime": end_date})
    
    # æ­¥éª¤3: åˆå¹¶æ•°æ®
    current_period_data['trafficFlow'] = traffic_flow_data
    current_period_data['vehicleData'] = vehicle_data
    year_ago_data['trafficFlow'] = year_ago_traffic_data
    
    # æ­¥éª¤4: ç”Ÿæˆå›¾è¡¨æ•°æ®
    charts_data = self._generate_charts_data(current_period_data, previous_period_data, year_ago_data, traffic_flow_data)
    
    # æ­¥éª¤5: ç”ŸæˆAIåˆ†ææ–‡å­—
    analysis_text = self._generate_analysis_text(current_period_data, previous_period_data, year_ago_data)
    
    return ReportData(...)
```

### ğŸ“¡ æ•°æ®æ¥æºè¯¦è§£

#### **å¤–éƒ¨APIæ¥å£** (http://116.182.4.67:8088/gssfApi2/v1/api)

ç³»ç»Ÿè°ƒç”¨ä»¥ä¸‹6ä¸ªAPIæ¥å£è·å–æ•°æ®ï¼š

1. **`trade/companyPayTypeTurnover`** (å½“å‰æœŸé—´)
   - è·å–ï¼šåˆ†å…¬å¸æ”¯ä»˜ç±»å‹äº¤æ˜“é¢æ•°æ®
   - ç”¨é€”ï¼šä¸»è¦åˆ†ææ•°æ®ï¼ŒåŒ…å«ETCã€ç°é‡‘ã€ç§»åŠ¨æ”¯ä»˜ç­‰

2. **`trade/companyPayTypeTurnover`** (ä¸ŠæœŸå¯¹æ¯”)
   - è·å–ï¼šä¸ŠæœŸåˆ†å…¬å¸æ”¯ä»˜ç±»å‹äº¤æ˜“é¢æ•°æ®
   - ç”¨é€”ï¼šç¯æ¯”åˆ†æï¼Œè®¡ç®—çŸ­æœŸè¶‹åŠ¿

3. **`trade/companyPayTypeTurnover`** (å»å¹´åŒæœŸ)
   - è·å–ï¼šå»å¹´åŒæœŸåˆ†å…¬å¸æ”¯ä»˜ç±»å‹äº¤æ˜“é¢æ•°æ®
   - ç”¨é€”ï¼šåŒæ¯”åˆ†æï¼Œè®¡ç®—é•¿æœŸè¶‹åŠ¿

4. **`traffic/companyPayTypeTrafficFlow`** (å½“å‰æœŸé—´)
   - è·å–ï¼šåˆ†å…¬å¸æ”¯ä»˜ç±»å‹è½¦æµé‡æ•°æ®
   - ç”¨é€”ï¼šè½¦æµé‡åˆ†æï¼Œç”Ÿæˆè½¦æµé‡å›¾è¡¨

5. **`traffic/companyPayTypeTrafficFlow`** (å»å¹´åŒæœŸ)
   - è·å–ï¼šå»å¹´åŒæœŸåˆ†å…¬å¸æ”¯ä»˜ç±»å‹è½¦æµé‡æ•°æ®
   - ç”¨é€”ï¼šè½¦æµé‡åŒæ¯”åˆ†æ

6. **`traffic/companyVehTypeTrafficFlow`** (å½“å‰æœŸé—´)
   - è·å–ï¼šåˆ†å…¬å¸è½¦å‹è½¦æµé‡æ•°æ®
   - ç”¨é€”ï¼šè½¦å‹åˆ†æï¼Œä¸°å¯ŒæŠ¥å‘Šå†…å®¹

#### **æ•°æ®æµå‘**

```
å¤–éƒ¨API â†’ æŠ¥å‘Šç”Ÿæˆå™¨ â†’ æ•°æ®å¤„ç† â†’ å›¾è¡¨ç”Ÿæˆ + AIåˆ†æ â†’ å‰ç«¯å±•ç¤º
```

### ğŸ“ˆ å›¾è¡¨ç”Ÿæˆé€»è¾‘

ç³»ç»Ÿç”Ÿæˆ6ç§ä¸åŒç±»å‹çš„å›¾è¡¨ï¼š

1. **åˆ†å…¬å¸äº¤æ˜“é¢TOP10** - åŸºäº `current_period_data['data']['payTypeTurnoverList']`
2. **åˆ†å…¬å¸è½¦æµé‡TOP10** - åŸºäº `traffic_flow_data['data']['payTypeTrafficFlowList']`
3. **è½¦æµé‡åŒæ¯”å¢é•¿åˆ†æ** - åŸºäºå½“å‰å’Œå»å¹´åŒæœŸè½¦æµé‡æ•°æ®å¯¹æ¯”
4. **ETCè½¦æµé‡ä¸é€šè¡Œè´¹ç™¾åˆ†æ¯”æŠ˜çº¿å›¾** - åŸºäºäº¤æ˜“é¢å’Œè½¦æµé‡æ•°æ®äº¤å‰åˆ†æ
5. **å„åˆ†å…¬å¸å®æ”¶é€šè¡Œè´¹åˆ†æ”¯ä»˜ç±»å‹å æ¯”** - åŸºäº `current_period_data['data']['payTypeTurnoverList']`
6. **å®æ”¶é€šè¡Œè´¹åŒæ¯”å¢é•¿åˆ†æ** - åŸºäºå½“å‰å’Œå»å¹´åŒæœŸäº¤æ˜“é¢æ•°æ®å¯¹æ¯”

### ğŸ¤– AIåˆ†æç”Ÿæˆé€»è¾‘

**æ ¸å¿ƒæ–¹æ³•ï¼š`_generate_analysis_text()`**

```python
def _generate_analysis_text(self, current_data: Dict, previous_data: Dict, year_ago_data: Dict) -> str:
    # è°ƒç”¨è¯¦ç»†åˆ†æç”Ÿæˆå™¨
    detailed_analysis = self._generate_detailed_analysis(current_data, previous_data, year_ago_data)
    
    # è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼
    return self._convert_analysis_to_text(detailed_analysis)
```

**è¯¦ç»†åˆ†æåŒ…å«ï¼š**

1. **æ‰§è¡Œæ‘˜è¦** (`_generate_executive_summary`)
   - ä¸šåŠ¡æ´å¯Ÿã€æ”¯ä»˜ç”Ÿæ€ç³»ç»Ÿåˆ†æã€è¿è¥æ•ˆç‡è¯„ä¼°

2. **å…³é”®æŒ‡æ ‡** (`_generate_key_metrics`)
   - æ ¸å¿ƒè´¢åŠ¡æŒ‡æ ‡ã€è¿è¥æ•ˆç‡æŒ‡æ ‡ã€ç»„ç»‡æ•ˆç‡æŒ‡æ ‡ã€æŠ€æœ¯æ¸—é€æŒ‡æ ‡ã€å¸‚åœºè¡¨ç°æŒ‡æ ‡

3. **ç»©æ•ˆåˆ†æ** (`_generate_performance_analysis`)
   - åŸºç¡€ç»©æ•ˆæ’åã€ç»©æ•ˆåˆ†å±‚ã€è¯¦ç»†ç¯æ¯”åŒæ¯”åˆ†æã€æ•ˆç‡å¯¹æ ‡ã€åŒºåŸŸç«äº‰åŠ›åˆ†æ

4. **è¶‹åŠ¿åˆ†æ** (`_generate_trend_analysis`)
   - æ•´ä½“è¶‹åŠ¿åˆ†æã€ç»“æ„æ€§è¶‹åŠ¿åˆ†æã€æ”¯ä»˜æ–¹å¼è¶‹åŠ¿åˆ†æã€è¶‹åŠ¿é¢„æµ‹ã€å­£èŠ‚æ€§åˆ†æ

5. **æ”¯ä»˜åˆ†æ** (`_generate_payment_analysis`)
   - åŸºç¡€æ”¯ä»˜ç»“æ„ã€æ”¯ä»˜ç”Ÿæ€ç³»ç»Ÿå¥åº·åº¦ã€ç”¨æˆ·è¡Œä¸ºæ´å¯Ÿã€æŠ€æœ¯æ¸—é€ç‡ã€æ”¯ä»˜æ•ˆç‡ã€å¸‚åœºç«äº‰åŠ›ã€å‘å±•è¶‹åŠ¿é¢„æµ‹

6. **æ´å¯Ÿå»ºè®®** (`_generate_insights`, `_generate_recommendations`, `_generate_risk_alerts`)
   - ä¸šåŠ¡æ´å¯Ÿã€æ”¹è¿›å»ºè®®ã€é£é™©é¢„è­¦

### ğŸ”„ æ•°æ®å¤ç”¨ç­–ç•¥

**æŠ¥å‘Šç”Ÿæˆå™¨é‡‡ç”¨æ™ºèƒ½æ•°æ®å¤ç”¨ç­–ç•¥ï¼š**

1. **å•æ¬¡APIè°ƒç”¨ï¼Œå¤šç”¨é€”ä½¿ç”¨**
   - åŒä¸€ä»½ `current_period_data` ç”¨äºï¼šå›¾è¡¨ç”Ÿæˆ + AIåˆ†æ + æ•°æ®æ¦‚è§ˆ
   - é¿å…é‡å¤è°ƒç”¨APIï¼Œæé«˜æ•ˆç‡

2. **æ•°æ®åˆå¹¶ä¼˜åŒ–**
   ```python
   # å°†è½¦æµé‡æ•°æ®åˆå¹¶åˆ°ä¸»æ•°æ®ç»“æ„ä¸­
   current_period_data['trafficFlow'] = traffic_flow_data
   current_period_data['vehicleData'] = vehicle_data
   ```

3. **å›¾è¡¨å’Œåˆ†æå…±äº«æ•°æ®æº**
   - å›¾è¡¨ç”Ÿæˆå’Œåˆ†ææ–‡å­—ä½¿ç”¨ç›¸åŒçš„æ•°æ®æº
   - ç¡®ä¿æ•°æ®ä¸€è‡´æ€§

### âš¡ æ€§èƒ½ä¼˜åŒ–

1. **é¡ºåºè¯·æ±‚** - é¿å…å¹¶å‘é™åˆ¶
2. **é‡è¯•æœºåˆ¶** - å¤„ç†ç½‘ç»œæ³¢åŠ¨
3. **æ•°æ®ç¼“å­˜** - é¿å…é‡å¤è®¡ç®—
4. **åå°å¤„ç†** - ä¸é˜»å¡ç”¨æˆ·ç•Œé¢

## ğŸ’¬ æ™ºèƒ½å¯¹è¯åŠŸèƒ½

### MCPå·¥å…·é›†æˆ

ç³»ç»Ÿé›†æˆäº†12ä¸ªMCPå·¥å…·ï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€æŸ¥è¯¢ï¼š

1. `get_realtime_transaction` - è·å–é›†å›¢å®æ—¶äº¤æ˜“æ•°æ®
2. `get_company_payment_transaction` - è·å–åˆ†å…¬å¸æ”¯ä»˜äº¤æ˜“æ•°æ®
3. `get_company_vehicle_transaction` - è·å–åˆ†å…¬å¸è½¦å‹äº¤æ˜“æ•°æ®
4. `get_station_payment_transaction` - è·å–æ”¶è´¹ç«™æ”¯ä»˜äº¤æ˜“æ•°æ®
5. `get_station_vehicle_transaction` - è·å–æ”¶è´¹ç«™è½¦å‹äº¤æ˜“æ•°æ®
6. `get_realtime_traffic_flow` - è·å–å®æ—¶äº¤é€šæµé‡æ•°æ®
7. `get_company_payment_traffic_flow` - è·å–åˆ†å…¬å¸æ”¯ä»˜ç±»å‹äº¤é€šæµé‡
8. `get_company_vehicle_traffic_flow` - è·å–åˆ†å…¬å¸è½¦å‹äº¤é€šæµé‡
9. `get_station_payment_traffic_flow` - è·å–æ”¶è´¹ç«™æ”¯ä»˜ç±»å‹äº¤é€šæµé‡
10. `get_station_vehicle_traffic_flow` - è·å–æ”¶è´¹ç«™è½¦å‹äº¤é€šæµé‡
11. `get_all_company_ids` - è·å–æ‰€æœ‰åˆ†å…¬å¸ID
12. `generate_report` - åœ¨å¯¹è¯ä¸­ç”Ÿæˆæ•°æ®æŠ¥å‘Š

### å¯¹è¯è¾“å‡ºä¼˜åŒ–

- **éšè—å·¥å…·è°ƒç”¨è¯¦æƒ…** - åªæ˜¾ç¤ºAIæœ€ç»ˆå›ç­”
- **æ™ºèƒ½æ•°æ®æ ¼å¼åŒ–** - è‡ªåŠ¨ç¾åŒ–JSONæ•°æ®å±•ç¤º
- **å®æ—¶çŠ¶æ€åé¦ˆ** - æ˜¾ç¤ºå¤„ç†è¿›åº¦

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- ç°ä»£æµè§ˆå™¨

### å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### é…ç½®ç¯å¢ƒå˜é‡
å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼š
```bash
cp backend/.env.example backend/.env
```

ç¼–è¾‘ `backend/.env` æ–‡ä»¶ï¼Œé…ç½®å¿…è¦å‚æ•°ï¼š
```env
# OpenAIå®¢æˆ·ç«¯é…ç½®(ç”¨äºAIæ¨ç†)
QWEN_MODEL=qwen2.5-32b-instruct
QWEN_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
QWEN_API_KEY=your_api_key_here

# FastAPIæœåŠ¡é…ç½®
FASTAPI_HOST=0.0.0.0
FASTAPI_PORT=8000
FASTAPI_RELOAD=false

# MCPå®¢æˆ·ç«¯é…ç½®
MAX_TOOL_CALLS=6
MAX_TOOL_RESULT_CHARS=6000

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
```

### å¯åŠ¨æœåŠ¡

#### æ™ºèƒ½å¯åŠ¨ï¼ˆæ¨èï¼‰
```bash
# ä»é¡¹ç›®æ ¹ç›®å½•å¯åŠ¨ï¼ˆè‡ªåŠ¨æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼‰
python backend/start_server.py

# ä»backendç›®å½•å¯åŠ¨
cd backend
python start_server.py
```

#### é«˜çº§å¯åŠ¨é€‰é¡¹
```bash
# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
python backend/start_server.py --reload --log-level debug

# ç”Ÿäº§æ¨¡å¼ï¼ˆå¤šè¿›ç¨‹ï¼‰
python backend/start_server.py --workers 4 --log-level warning

# è‡ªå®šä¹‰é…ç½®
python backend/start_server.py --host 127.0.0.1 --port 8080 --env-file custom.env

# æŸ¥çœ‹æ‰€æœ‰é€‰é¡¹
python backend/start_server.py --help
```
```

### è®¿é—®ç³»ç»Ÿ
- å‰ç«¯ç•Œé¢ï¼šhttp://localhost:8080
- åç«¯APIï¼šhttp://localhost:8000
- APIæ–‡æ¡£ï¼šhttp://localhost:8000/docs

## ğŸ“‹ APIæ¥å£

### æŠ¥å‘Šç”Ÿæˆæ¥å£
- `POST /api/report/generate` - ç”ŸæˆæŠ¥å‘Š
- `GET /api/report/status/{report_id}` - æŸ¥è¯¢æŠ¥å‘ŠçŠ¶æ€
- `GET /api/report/result/{report_id}` - è·å–æŠ¥å‘Šç»“æœ
- `GET /api/report/list` - åˆ—å‡ºæ‰€æœ‰æŠ¥å‘Š
- `DELETE /api/report/{report_id}` - åˆ é™¤æŠ¥å‘Š

### èŠå¤©æ¥å£
- `POST /v1/chat/completions` - OpenAIå…¼å®¹çš„èŠå¤©æ¥å£

## ğŸ¨ å‰ç«¯åŠŸèƒ½

### æŠ¥å‘Šç®¡ç†
- ğŸ“Š æ™ºèƒ½æŠ¥å‘Šç”Ÿæˆ
- ğŸ“ˆ å¤šç»´åº¦å›¾è¡¨å±•ç¤º
- ğŸ“¥ æŠ¥å‘Šä¸‹è½½ï¼ˆWordæ ¼å¼ï¼‰
- ğŸ” å›¾è¡¨å…¨å±æŸ¥çœ‹
- ğŸ“‹ æŠ¥å‘Šå†å²ç®¡ç†

### æ™ºèƒ½å¯¹è¯
- ğŸ’¬ è‡ªç„¶è¯­è¨€æŸ¥è¯¢
- ğŸ¤– AIæ™ºèƒ½å›ç­”
- ğŸ“Š æ•°æ®å¯è§†åŒ–å±•ç¤º
- ğŸ“ å¯¹è¯å†å²ç®¡ç†

## ğŸ”§ æŠ€æœ¯æ ˆ

### åç«¯
- **FastAPI** - é«˜æ€§èƒ½Webæ¡†æ¶
- **MCP** - Model Context Protocol
- **Matplotlib** - å›¾è¡¨ç”Ÿæˆ
- **Pandas/NumPy** - æ•°æ®å¤„ç†
- **HTTPX** - å¼‚æ­¥HTTPå®¢æˆ·ç«¯

### å‰ç«¯
- **HTML5/CSS3** - ç°ä»£åŒ–ç•Œé¢
- **JavaScript** - äº¤äº’é€»è¾‘
- **Chart.js** - å›¾è¡¨å±•ç¤ºï¼ˆå·²æ›¿æ¢ä¸ºé™æ€PNGï¼‰

### æ•°æ®æº
- **å¤–éƒ¨API** - æ”¶è´¹ç³»ç»Ÿæ•°æ®æ¥å£
- **å¼‚æ­¥å¤„ç†** - åå°ä»»åŠ¡å¤„ç†

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.1.0 (æœ€æ–°) - æ¶æ„é‡æ„ç‰ˆ
- ğŸ—ï¸ **é‡å¤§æ¶æ„é‡æ„**: æ¨¡å—åŒ–è®¾è®¡ï¼Œä»£ç ç»„ç»‡æ›´æ¸…æ™°
- ğŸ“ **æ–°å¢æ¨¡å—ç»“æ„**: apis/ clients/ reports/ utils/ config/
- ğŸš€ **æ™ºèƒ½å¯åŠ¨è„šæœ¬**: è‡ªåŠ¨æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒå¤šç§å¯åŠ¨æ¨¡å¼
- ğŸ”§ **è·¯å¾„è‡ªé€‚åº”**: æ”¯æŒä»é¡¹ç›®æ ¹ç›®å½•æˆ–backendç›®å½•å¯åŠ¨
- ğŸ“‹ **å®Œå–„æ–‡æ¡£**: æ›´æ–°æ¶æ„è¯´æ˜å’Œä½¿ç”¨æŒ‡å—
- âœ… **å‘åå…¼å®¹**: ä¿æŒæ‰€æœ‰åŸæœ‰åŠŸèƒ½ä¸å˜

### v2.0.0
- âœ… ä¿®å¤æŠ¥å‘Šç”Ÿæˆè¯­æ³•é”™è¯¯
- âœ… ä¼˜åŒ–æ™ºèƒ½å¯¹è¯è¾“å‡ºæ ¼å¼
- âœ… å¢å¼ºAIåˆ†æè¯¦ç»†ç¨‹åº¦
- âœ… å®Œå–„å›¾è¡¨ç”ŸæˆåŠŸèƒ½
- âœ… æ”¹è¿›å‰ç«¯ç”¨æˆ·ä½“éªŒ

### v1.0.0
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ“Š åŸºç¡€æŠ¥å‘Šç”ŸæˆåŠŸèƒ½
- ğŸ’¬ æ™ºèƒ½å¯¹è¯åŠŸèƒ½
- ğŸ“ˆ å›¾è¡¨å¯è§†åŒ–

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç¯å¢ƒå˜é‡æ–‡ä»¶æ‰¾ä¸åˆ°
```
é”™è¯¯: ç¯å¢ƒå˜é‡æ–‡ä»¶ä¸å­˜åœ¨: .env
```
**è§£å†³æ–¹æ¡ˆ:**
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp backend/.env.example backend/.env
# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano backend/.env
```

#### 2. MCPæœåŠ¡å™¨è„šæœ¬ä¸å­˜åœ¨
```
é”™è¯¯: MCPæœåŠ¡å™¨è„šæœ¬ä¸å­˜åœ¨: backend/apis/platformbilling_mcp.py
```
**è§£å†³æ–¹æ¡ˆ:**
æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿é‡æ„åçš„æ–‡ä»¶ç»“æ„å®Œæ•´ã€‚

#### 3. ç¼ºå°‘å¿…è¦ç¯å¢ƒå˜é‡
```
é”™è¯¯: ç¼ºå°‘å¿…è¦çš„ç¯å¢ƒå˜é‡: QWEN_API_KEY, QWEN_BASE_URL, QWEN_MODEL
```
**è§£å†³æ–¹æ¡ˆ:**
åœ¨ `backend/.env` æ–‡ä»¶ä¸­é…ç½®ä»¥ä¸‹å˜é‡ï¼š
```env
QWEN_API_KEY=your_api_key_here
QWEN_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
QWEN_MODEL=qwen2.5-32b-instruct
```

#### 4. ç«¯å£è¢«å ç”¨
```
ERROR: [Errno 48] Address already in use
```
**è§£å†³æ–¹æ¡ˆ:**
```bash
# ä½¿ç”¨ä¸åŒç«¯å£å¯åŠ¨
python backend/start_server.py --port 8001

# æˆ–è€…æ€æ­»å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -ti:8000 | xargs kill -9
```

#### 5. æ¨¡å—å¯¼å…¥é”™è¯¯
```
ModuleNotFoundError: No module named 'apis'
```
**è§£å†³æ–¹æ¡ˆ:**
ç¡®ä¿ä»æ­£ç¡®çš„ç›®å½•å¯åŠ¨æœåŠ¡ï¼Œæ¨èä½¿ç”¨ï¼š
```bash
# ä»é¡¹ç›®æ ¹ç›®å½•å¯åŠ¨
python backend/start_server.py
```

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—è¿›è¡Œè°ƒè¯•ï¼š
```bash
python backend/start_server.py --reload --log-level debug
```

### è·å–å¸®åŠ©

æŸ¥çœ‹æ‰€æœ‰å¯ç”¨é€‰é¡¹ï¼š
```bash
python backend/start_server.py --help
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¡¹ç›®ï¼

### å¼€å‘ç¯å¢ƒè®¾ç½®
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd project

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¤åˆ¶é…ç½®æ–‡ä»¶
cp backend/.env.example backend/.env

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python backend/start_server.py --reload --log-level debug
```

## ğŸ“„ è®¸å¯è¯

MIT License
```
